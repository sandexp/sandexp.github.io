#### znode

zookeeper不会保留同步原语，而是通过类似文件系统的API，允许用户实现自己的原语。 zookeeper通过recipes来表现这些原语。recipes包括zookeeper操作和维护一个小型的数据节点，叫做znode，znode的叶子节点会存储实际的数据信息。

##### znode的类型

1. 持久节点

   持久节点只能通过delete语句进行删除，通常用于保存一些有用的数据，即使应用的创建者宕机了，这些状态信息也会存储在持久节点中。

2. 临时节点

   临时节点当且仅当用户会话的生命周期中有效，当关闭会话或者超时，则临时节点失效。一般情况下，不允许临时节点拥有子节点。可以使用临时节点来实现分布式锁的功能。

3. 有序节点

   一个有序的znode节点被分配唯一一个单调递增函数，创建有序节点时候，需要会追加到路径之后。可以通过这个方式确定节点的创建顺序。

#### 监视与通知机制

为了替客户端进行轮询，zookeeper采用了通知的机制，客户端向zookeeper注册需要接受通知的znode，通过对znode节点设置监听器来实现，监视点是单次触发的。

zookeeper为了保证znode数据的一致性，先向客户端发送通知，后才会更改znode的信息。

#### 版本机制

每个znode都有一个版本信息，随着数据的变化而自增。这个主要是解决znode进行多版本写入时候出现的问题。(先前版本数据无法获取)。

